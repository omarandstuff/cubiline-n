using UnityEngine;

public class Follow : MonoBehaviour
{
	//////////////////////////////////////////////////////////////
	//////////////////////// PARAMETERS //////////////////////////
	//////////////////////////////////////////////////////////////

	public Transform target;
	public enum FOLLOW_TYPE { SMOOTH, SPEED}
	public FOLLOW_TYPE followType;
	public float followSmoothTime;
	public float followSpeed;

	//////////////////////////////////////////////////////////////
	////////////////////// CONTROL VARIABLES /////////////////////
	//////////////////////////////////////////////////////////////

	private Vector3 currentPosition;
	private Vector3 velocity = Vector3.zero;

	////////////////////////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////// MONO BEHAVIOR /////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////

	void Start()
	{
		currentPosition = transform.position;
	}

	void Update()
	{
		if(target != null)
		{
			if (followType == FOLLOW_TYPE.SMOOTH)
			{
				currentPosition = Vector3.SmoothDamp(currentPosition, target.position, ref velocity, followSmoothTime);
			}
			else
			{
				Vector3 direction = (target.position - currentPosition).normalized;
				currentPosition += direction * followSpeed * Time.deltaTime;
			}

			transform.position = currentPosition;
		}
	}
}
