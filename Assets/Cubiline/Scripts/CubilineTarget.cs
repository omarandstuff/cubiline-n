using UnityEngine;
using System.Collections;

public class CubilineTarget : MonoBehaviour
{
	//////////////////////////////////////////////////////////////
	///////////////////////// COMPONENTS /////////////////////////
	//////////////////////////////////////////////////////////////

	public GameObject particlePrefab;

	//////////////////////////////////////////////////////////////
	///////////////////////// PARAMETERS /////////////////////////
	//////////////////////////////////////////////////////////////

	public int index;
	public int toGrow = 1;
	public int score = 1;
	public Vector3 targetScale;
	public float scaleTime = 0.3f;

	//////////////////////////////////////////////////////////////
	////////////////////// CONTROL VARIABLES /////////////////////
	//////////////////////////////////////////////////////////////

	private Vector3 rotation;
	private Vector3 scaleVelocity = Vector3.zero;

	////////////////////////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////// MONO BEHAVIOR ////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////

	void Start()
	{
		transform.localScale = Vector3.zero;
	}

	void FixedUpdate()
	{
		if (transform.localScale != targetScale) transform.localScale = Vector3.SmoothDamp(transform.localScale, targetScale, ref scaleVelocity, scaleTime);
		transform.localRotation = Quaternion.Euler(rotation);
	}

	void OnTriggerEnter(Collider other)
	{
		if (other.tag == "Player")
			Destroy(Instantiate(particlePrefab, transform.position, Quaternion.identity), 20.0f);
	}
}
